@model IEnumerable<Crunchers.Models.CityModel>
<div id="LoadingImage" style="display:none;background-color: rgb(255, 255, 255); opacity: 0.7; width: 100%; height: 100%; position: absolute; top: 0px; left: 0px; z-index: 99999;">
    <img style="display: block;margin-left: auto;margin-right: auto" src="https://igc-market.ru/images/loading.gif"/>
</div>
<script>
function AddCity() {
  let nameRu = document.getElementById("newCityRu").value;
   $("#LoadingImage").show();
         $.ajax({
                  type: "POST",
                  url: '@Url.RouteUrl(new {controller = "Admin", action = "AddCity"})?nameRu='+nameRu,
                  data: {},
                  dataType: 'json',
                  timeout: 15000,
                  success: function (data) {
                      $("#LoadingImage").hide();
                      alert('Город успешно добавлен');
                      location.reload();     
                  },
                  error: function(inc) {
                      $("#LoadingImage").hide();
                      alert('Произошла ошибка');
                      location.reload(); 
                  }
              });
}
function DeleteCity(cityId) {
   $("#LoadingImage").show();
         $.ajax({
                  type: "POST",
                  url: '@Url.RouteUrl(new {controller = "Admin", action = "DeleteCity"})?cityId='+cityId,
                  data: {},
                  dataType: 'json',
                  timeout: 15000,
                  success: function (data) {
                      $("#LoadingImage").hide();
                      alert('Город успешно добавлен');
                      location.reload();     
                  },
                  error: function(inc) {
                      $("#LoadingImage").hide();
                      alert('Произошла ошибка');
                      location.reload(); 
                  }
              });
}
function ChangeCity(cityId) {
   $("#LoadingImage").show();
         $.ajax({
                  type: "POST",
                  url: '@Url.RouteUrl(new {controller = "Admin", action = "ChangeCity"})?nameRu='+document.getElementById("Ru="+cityId).value+'&cityId='+cityId,
                  data: {},
                  dataType: 'json',
                  timeout: 15000,
                  success: function (data) {
                      $("#LoadingImage").hide();
                      alert('Город успешно изменен');
                      location.reload();     
                  },
                  error: function(inc) {
                      $("#LoadingImage").hide();
                      alert('Произошла ошибка');
                      location.reload(); 
                  }
              });
}
</script>
<h1>Города</h1>
<form>
    <input id="newCityRu" placeholder="Введите название города на русском">
    <a onclick="AddCity()">Добавить город</a>
</form>

<hr/>
@foreach (var city in Model)
{
    <form>
        <input id="Ru=@city.CityId" value="@city.NameRu"/>
        <a onclick="DeleteCity(@(city.CityId))">Удалить город</a> /
        <a onclick="ChangeCity(@(city.CityId))">Изменить город</a> /
        <a href="/Admin/ManagePointsOfPickUpByCityId?cityId=@(city.CityId)">Управление точками вывоза</a>
    </form>
    <br/>
    <br/>
}